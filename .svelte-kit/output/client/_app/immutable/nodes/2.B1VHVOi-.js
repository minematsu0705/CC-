import{a as D,f as Y}from"../chunks/Cxq8HYa7.js";import{i as _e}from"../chunks/C-SlaUUK.js";import{h as M,c as W,K as he,i as X,a as pe,b as me,y as h,r as be,H as ge,s as se,d as Q,k as J,L as xe,M as Ee,N as ne,e as U,j as re,O as ye,l as ke,P as we,Q as Te,R as le,S as Se,T as ie,U as Ne,V as Ae,W as q,X as H,f as de,p as ce,Y as Z,Z as Ce,_ as Ie,g as Me,$ as Re,a0 as Oe,a1 as He,a2 as Le,a3 as Fe,a4 as De,a5 as ze,t as Ve,a6 as Ue,a7 as Ye,C as Be,D as z,F as Pe,G as x,J as k,I as p,a8 as F}from"../chunks/B38QsyHB.js";import{e as te,s as V}from"../chunks/7G569Jtb.js";import{i as $}from"../chunks/C_QWeCts.js";function oe(e,r){return r}function qe(e,r,s){for(var f=[],t=r.length,i,o=r.length,a=0;a<t;a++){let d=r[a];ce(d,()=>{if(i){if(i.pending.delete(d),i.done.add(d),i.pending.size===0){var b=e.outrogroups;ae(le(i.done)),b.delete(i),b.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=f.length===0&&s!==null;if(u){var n=s,c=n.parentNode;Ie(c),c.append(n),e.items.clear()}ae(r,!u)}else i={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(i)}function ae(e,r=!0){for(var s=0;s<e.length;s++)Me(e[s],r)}var fe;function ve(e,r,s,f,t,i=null){var o=e,a=new Map;{var u=e;o=M?W(he(u)):u.appendChild(X())}M&&pe();var n=null,c=we(()=>{var m=s();return Te(m)?m:m==null?[]:le(m)}),d,b=!0;function R(){w.fallback=n,Ge(w,d,o,r,f),n!==null&&(d.length===0?(n.f&H)===0?de(n):(n.f^=H,G(n,null,o)):ce(n,()=>{n=null}))}var l=me(()=>{d=h(c);var m=d.length;let v=!1;if(M){var _=be(o)===ge;_!==(m===0)&&(o=se(),W(o),Q(!1),v=!0)}for(var E=new Set,y=U,T=ke(),S=0;S<m;S+=1){M&&J.nodeType===xe&&J.data===Ee&&(o=J,v=!0,Q(!1));var C=d[S],g=f(C,S),N=b?null:a.get(g);N?(N.v&&ne(N.v,C),N.i&&ne(N.i,S),T&&y.unskip_effect(N.e)):(N=Je(a,b?o:fe??=X(),C,g,S,t,r,s),b||(N.e.f|=H),a.set(g,N)),E.add(g)}if(m===0&&i&&!n&&(b?n=re(()=>i(o)):(n=re(()=>i(fe??=X())),n.f|=H)),m>E.size&&ye(),M&&m>0&&W(se()),!b)if(T){for(const[K,I]of a)E.has(K)||y.skip_effect(I.e);y.oncommit(R),y.ondiscard(()=>{})}else R();v&&Q(!0),h(c)}),w={effect:l,items:a,outrogroups:null,fallback:n};b=!1,M&&(o=J)}function P(e){for(;e!==null&&(e.f&Ce)===0;)e=e.next;return e}function Ge(e,r,s,f,t){var i=r.length,o=e.items,a=P(e.effect.first),u,n=null,c=[],d=[],b,R,l,w;for(w=0;w<i;w+=1){if(b=r[w],R=t(b,w),l=o.get(R).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(l),g.done.delete(l);if((l.f&H)!==0)if(l.f^=H,l===a)G(l,null,s);else{var m=n?n.next:a;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),O(e,n,l),O(e,l,m),G(l,m,s),n=l,c=[],d=[],a=P(n.next);continue}if((l.f&Z)!==0&&de(l),l!==a){if(u!==void 0&&u.has(l)){if(c.length<d.length){var v=d[0],_;n=v.prev;var E=c[0],y=c[c.length-1];for(_=0;_<c.length;_+=1)G(c[_],v,s);for(_=0;_<d.length;_+=1)u.delete(d[_]);O(e,E.prev,y.next),O(e,n,E),O(e,y,v),a=v,n=y,w-=1,c=[],d=[]}else u.delete(l),G(l,a,s),O(e,l.prev,l.next),O(e,l,n===null?e.effect.first:n.next),O(e,n,l),n=l;continue}for(c=[],d=[];a!==null&&a!==l;)(u??=new Set).add(a),d.push(a),a=P(a.next);if(a===null)continue}(l.f&H)===0&&c.push(l),n=l,a=P(l.next)}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(ae(le(g.done)),e.outrogroups?.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||u!==void 0){var T=[];if(u!==void 0)for(l of u)(l.f&Z)===0&&T.push(l);for(;a!==null;)(a.f&Z)===0&&a!==e.fallback&&T.push(a),a=P(a.next);var S=T.length;if(S>0){var C=i===0?s:null;qe(e,T,C)}}}function Je(e,r,s,f,t,i,o,a){var u=(o&Ne)!==0?(o&Ae)===0?q(s,!1,!1):ie(s):null,n=(o&Se)!==0?ie(t):null;return{v:u,i:n,e:re(()=>(i(r,u??s,n??t,a),()=>{e.delete(f)}))}}function G(e,r,s){if(e.nodes)for(var f=e.nodes.start,t=e.nodes.end,i=r&&(r.f&H)===0?r.nodes.start:s;f!==null;){var o=Re(f);if(i.before(f),f===t)return;f=o}}function O(e,r,s){r===null?e.effect.first=s:r.next=s,s===null?e.effect.last=r:s.prev=r}const Ke=Symbol("is custom element"),We=Symbol("is html");function Xe(e){if(M){var r=!1,s=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var f=e.value;ue(e,"value",null),e.value=f}if(e.hasAttribute("checked")){var t=e.checked;ue(e,"checked",null),e.checked=t}}};e.__on_r=s,Oe(s),He()}}function ue(e,r,s,f){var t=Qe(e);M&&(t[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||t[r]!==(t[r]=s)&&(r==="loading"&&(e[Le]=s),e.removeAttribute(r))}function Qe(e){return e.__attributes??={[Ke]:e.nodeName.includes("-"),[We]:e.namespaceURI===Fe}}function Ze(e,r,s=r){var f=new WeakSet;De(e,"input",async t=>{var i=t?e.defaultValue:e.value;if(i=j(e)?ee(i):i,s(i),U!==null&&f.add(U),await ze(),i!==(i=r())){var o=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=i??"",a!==null){var n=e.value.length;o===a&&a===u&&n>u?(e.selectionStart=n,e.selectionEnd=n):(e.selectionStart=o,e.selectionEnd=Math.min(a,n))}}}),(M&&e.defaultValue!==e.value||Ve(r)==null&&e.value)&&(s(j(e)?ee(e.value):e.value),U!==null&&f.add(U)),Ue(()=>{var t=r();if(e===document.activeElement){var i=Ye??U;if(f.has(i))return}j(e)&&t===ee(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function j(e){var r=e.type;return r==="number"||r==="range"}function ee(e){return e===""?null:+e}var $e=Y('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert"><strong class="font-bold">エラー:</strong> <span class="block sm:inline"> </span></div>'),je=Y("<li> </li>"),er=Y("<li> </li>"),rr=Y('<div class="bg-yellow-50 p-4 rounded border border-yellow-200"><h3 class="font-semibold text-yellow-800 mb-1">コツ・ポイント</h3> <p class="text-gray-700"> </p></div>'),ar=Y('<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"><h2 class="text-2xl font-bold mb-4"> </h2> <div class="mb-4"><h3 class="text-xl font-semibold mb-2">材料</h3> <ul class="list-disc pl-5"></ul></div> <div class="mb-4"><h3 class="text-xl font-semibold mb-2">作り方</h3> <ol class="list-decimal pl-5 space-y-2"></ol></div> <!></div>'),lr=Y('<main class="container mx-auto p-4 max-w-2xl"><h1 class="text-3xl font-bold mb-6 text-center">レシピジェネレーター</h1> <div class="mb-4"><label for="dish" class="block mb-2 font-medium">料理名</label> <div class="flex gap-2"><input id="dish" type="text" class="border p-2 rounded w-full" placeholder="例: カレー, 肉じゃが"/> <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> </button></div></div> <!> <!></main>');function fr(e,r){Be(r,!1);let s=q(""),f=q(!1),t=q(null),i=q(null);async function o(){if(h(s)){F(f,!0),F(i,null),F(t,null);try{const v=await fetch("/api/recipe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dishName:h(s)})});if(!v.ok)throw new Error("Failed to generate recipe");F(t,await v.json())}catch(v){F(i,v.message)}finally{F(f,!1)}}}_e();var a=lr(),u=k(x(a),2),n=k(x(u),2),c=x(n);Xe(c);var d=k(c,2),b=x(d,!0);p(d),p(n),p(u);var R=k(u,2);{var l=v=>{var _=$e(),E=k(x(_),2),y=x(E,!0);p(E),p(_),z(()=>V(y,h(i))),D(v,_)};$(R,v=>{h(i)&&v(l)})}var w=k(R,2);{var m=v=>{var _=ar(),E=x(_),y=x(E,!0);p(E);var T=k(E,2),S=k(x(T),2);ve(S,5,()=>h(t).ingredients,oe,(I,L)=>{var A=je(),B=x(A,!0);p(A),z(()=>V(B,h(L))),D(I,A)}),p(S),p(T);var C=k(T,2),g=k(x(C),2);ve(g,5,()=>h(t).steps,oe,(I,L)=>{var A=er(),B=x(A,!0);p(A),z(()=>V(B,h(L))),D(I,A)}),p(g),p(C);var N=k(C,2);{var K=I=>{var L=rr(),A=k(x(L),2),B=x(A,!0);p(A),p(L),z(()=>V(B,h(t).tips)),D(I,L)};$(N,I=>{h(t).tips&&I(K)})}p(_),z(()=>V(y,h(t).name)),D(v,_)};$(w,v=>{h(t)&&v(m)})}p(a),z(()=>{d.disabled=h(f)||!h(s),V(b,h(f)?"生成中...":"レシピを作る")}),Ze(c,()=>h(s),v=>F(s,v)),te("keydown",c,v=>v.key==="Enter"&&o()),te("click",d,o),D(e,a),Pe()}export{fr as component};
